<h1>Rock Paper Scissors</h1>

<div class="row">
  <div class="col-12">
    <h2>Select an action</h2>
    <div *ngFor="let handShape of handShapes$|async"
      id="user-hand-shapes"
      class="d-inline-block mr-3">
      <app-hand-shape [handShape]="handShape"
        (evtClick)="fightRound($event)"></app-hand-shape>
    </div>
  </div>
</div>
<div class="row mt-5" style="max-width: 700px">
  <div class="col-12 col-md-4">
    <h3>User selection</h3>
    <div id="user-selected-shape">
      <app-hand-shape [isDisabled]="true"
        [handShape]="userSelectedShape">
      </app-hand-shape>
    </div>
  </div>

  <div class="col-12 col-md-4">
    <div *ngIf="fightRoundResult$|async as fightRoundResult;"
      class="flex-center h-100 w-100 justify-content-start justify-content-md-center"
      style="font-size: 72px">
      {{fightRoundResult.isTie ? '-' : (fightRoundResult.isUserVictory ? '>' : '<')}}
    </div>
  </div>

  <div class="col-12 col-md-4 text-left text-md-right">
    <div id="cpu-selected-shape ">
      <h3>CPU Selection</h3>
      <div class="ml-0 ml-md-auto">
        <ng-container *ngIf="cpuHandShape$|async as cpuHandShape; else waitingForUser">
          <app-hand-shape [isDisabled]="true"
            [handShape]="cpuHandShape">
          </app-hand-shape>
        </ng-container>
        <ng-template #waitingForUser>
          <app-hand-shape [isDisabled]="true">
          </app-hand-shape>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<div id="fight-round-result"
  class="h2 p-3 border border-light">
  <span class="p-1">
    Outcome:
  </span>
  <span *ngIf="fightRoundResult$|async as fightRoundResult; else outcomePending"
    [class.outcome-tie]="fightRoundResult.isTie"
    [class.outcome-win]="fightRoundResult.isUserVictory"
    [class.outcome-loss]="!fightRoundResult.isTie && !fightRoundResult.isUserVictory"
    class="outcome p-1 pl-3 pr-3">
    {{fightRoundResult.isTie ? 'Tie' : (fightRoundResult.isUserVictory ? 'Victory' : 'Loss')}}
  </span>
  <ng-template #outcomePending>
    <span class="outcome p-1 pl-3 pr-3">-</span>
  </ng-template>
</div>

<div *ngIf="errors$|async"
  id="server-errors">
  There was an unexpected server error :(
</div>